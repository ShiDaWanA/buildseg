import{u as b,T as x}from"./useSetting-1e631b4e.js";import{d as T,c as s,o as g,e as v,f as d,h as o,w as i,g as a,i as w,t as _,m as N,ao as S,z as C,l as L,_ as B}from"./index-ab68adb5.js";const R={style:{width:"150px"}},U={class:"status"},I=T({__name:"TaskProgress",props:{id:{type:String,default:""},type:{type:String,default:""},status:{type:Number,default:0},progress:{type:Number,require:!0}},setup(t){const p=t,{getTaskStatusTag:f,getTaskStatusName:y}=b(),k=()=>{L({method:"POST",url:"api/Log/GetBackendLog",data:{Id:p.id,Type:p.type},responseType:"blob"}).then(n=>{const u=n.data,c=new Blob([u]);let r=n.headers["content-disposition"],l=new RegExp("filename=([^;]+\\.[^\\.;]+);*").exec(r),h=decodeURI(l[1]);const e=document.createElement("a");e.download=h,e.target="_blank",e.style.display="none",e.href=URL.createObjectURL(c),document.body.appendChild(e),e.click(),URL.revokeObjectURL(e.href),document.body.removeChild(e)})};return(n,u)=>{const c=s("el-tag"),r=s("el-popover"),m=s("el-icon"),l=s("el-progress");return g(),v("div",R,[d("div",U,[d("div",null,[o(r,{placement:"top-start",title:"任务编号",width:200,trigger:"click",content:t.id},{reference:i(()=>[o(c,{size:"small",type:a(f)(t.status),"disable-transitions":""},{default:i(()=>[w(_(a(y)(t.status)),1)]),_:1},8,["type"])]),_:1},8,["content"]),t.status==a(x).Failed?(g(),N(m,{key:0,style:{"margin-left":"8px",cursor:"pointer"},onClick:k},{default:i(()=>[o(a(S))]),_:1})):C("",!0)]),d("div",null,_(t.progress)+"%",1)]),o(l,{"text-inside":!0,"stroke-width":5,percentage:t.progress,"show-text":!1},null,8,["percentage"])])}}});const E=B(I,[["__scopeId","data-v-c53c503d"]]);export{E as T};
