import{B as q}from"./BaseTitle-588acb84.js";import{d as x,r as s,H as D,l as u,c as n,e as _,h as e,f as k,w as b,F as h,o as d,q as B,m as C}from"./index-ab68adb5.js";const y={class:"flex-gap-8",style:{width:"700px"}},Y=x({__name:"LogRequest",setup(M){const r=s([]),c=s([]),p=s(""),i=s();D(()=>{g()});const g=()=>{u.get("/api/Log/GetRequestLogs").then(t=>{r.value=t}),u.get("/api/User/GetAll").then(t=>{c.value=t})},m=t=>{u.get("/api/LogRequest/GetLogs",{params:{userId:p.value,startDateTime:t==null?"":t[0],endDateTime:t==null?"":t[1]}}).then(o=>{r.value=o})};return(t,o)=>{const v=n("el-date-picker"),f=n("el-option"),w=n("el-select"),L=n("el-divider"),l=n("el-table-column"),V=n("el-table");return d(),_(h,null,[e(q,{title:"操作日志",icon:"icon-rizhiguanli"}),k("div",y,[e(v,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=a=>i.value=a),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:m},null,8,["modelValue"]),e(w,{modelValue:p.value,"onUpdate:modelValue":o[1]||(o[1]=a=>p.value=a),filterable:"",clearable:"",placeholder:"请选择用户",onChange:m},{default:b(()=>[(d(!0),_(h,null,B(c.value,a=>(d(),C(f,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),e(L),e(V,{data:r.value,height:"calc(100vh - 223px)"},{default:b(()=>[e(l,{prop:"userName",label:"用户名"}),e(l,{prop:"roleName",label:"角色"}),e(l,{prop:"requestUrl",label:"请求接口","show-overflow-tooltip":""}),e(l,{prop:"requestMethod",label:"请求方法"}),e(l,{prop:"host",label:"地址"}),e(l,{prop:"port",label:"端口"}),e(l,{prop:"hostype",label:"地址类型"}),e(l,{prop:"queryString",label:"查询字符串","show-overflow-tooltip":""}),e(l,{prop:"statusCode",label:"状态"}),e(l,{prop:"created",label:"日期",width:"200"})]),_:1},8,["data"])],64)}}});export{Y as default};
