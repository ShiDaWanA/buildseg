import{d as C,u as F,r as h,a as I,c as i,e as c,f as r,g as e,h as t,t as v,w as u,F as L,q as B,s as q,o as d,v as z,x as K,y as R,m as A,i as x,z as U,A as b,l as D,B as E,_ as M}from"./index-ab68adb5.js";import{u as T}from"./system-1c9c8d23.js";const j=["src"],G={class:"login_wrapper"},H={class:"login_form"},J={class:"login_form_title"},O={class:"flex-gap-8"},P={class:"login_footer"},Q=C({__name:"Login",setup(W){const s=F(),w=T(),g=h();let o=h({userName:"",password:""});const k=I({userName:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:16,message:"长度在 3 到 16 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:32,message:"长度在 6 到 32 个字符",trigger:"blur"}]}),N=()=>{b.push({path:"/register"})},p=()=>{var m;(m=g.value)==null||m.validate(a=>{if(a)D({method:"post",url:"api/user/Authenticate",data:o.value}).then(l=>{E(l),w.setItem({name:l.userName,role:l.role}),b.push({path:"/"})});else return!1})};return(m,a)=>{const l=i("el-image"),_=i("el-input"),f=i("el-form-item"),y=i("el-button"),V=i("el-form");return d(),c("div",{class:"login",style:q({backgroundImage:"url(data:image/png;base64,"+e(s).setting.backgroundImage+")"})},[r("img",{class:"login_logo",src:"data:image/png;base64,"+e(s).setting.loginLogo},null,8,j),r("div",G,[t(l,{class:"login_image",src:"data:image/png;base64,"+e(s).setting.introduceImage},null,8,["src"]),r("div",H,[r("span",J,v(e(s).setting.title),1),t(V,{model:e(o),size:"large","label-position":"left","hide-required-asterisk":!1,rules:k,ref_key:"loginFormRef",ref:g},{default:u(()=>[t(f,{prop:"userName"},{default:u(()=>[t(_,{modelValue:e(o).userName,"onUpdate:modelValue":a[0]||(a[0]=n=>e(o).userName=n),modelModifiers:{trim:!0},placeholder:"用户名","prefix-icon":e(z)},null,8,["modelValue","prefix-icon"])]),_:1}),t(f,{prop:"password"},{default:u(()=>[t(_,{type:"password",modelValue:e(o).password,"onUpdate:modelValue":a[1]||(a[1]=n=>e(o).password=n),placeholder:"密码","prefix-icon":e(K),autocomplete:"off",onKeyup:R(p,["enter","native"])},null,8,["modelValue","prefix-icon","onKeyup"])]),_:1}),r("div",O,[e(s).setting.allowRegister?(d(),A(y,{key:0,type:"info",round:"",style:{width:"100%"},onClick:N},{default:u(()=>[x("注册")]),_:1})):U("",!0),t(y,{type:"primary",round:"",style:{width:"100%"},onClick:p},{default:u(()=>[x("登录")]),_:1})])]),_:1},8,["model","rules"])])]),r("div",P,[(d(!0),c(L,null,B(e(s).setting.loginFooter,(n,S)=>(d(),c("span",{key:S},v(n),1))),128))])],4)}}});const Z=M(Q,[["__scopeId","data-v-dde8b5d5"]]);export{Z as default};
