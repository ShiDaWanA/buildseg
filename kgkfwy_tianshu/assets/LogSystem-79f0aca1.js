import{u as _,w as D}from"./xlsx-4f9172c7.js";import{d as L,r as u,H as S,l as m,c as n,e as k,h as e,f as g,w as r,g as T,F as C,o as V,i as f,al as B,t as H,_ as M}from"./index-ab68adb5.js";import{B as I}from"./BaseTitle-588acb84.js";const Y={class:"flex-gap-8",style:{width:"700px"}},E=["innerHTML"],F=L({__name:"LogSystem",setup(N){const c=u([]),s=u();S(()=>{d()});const d=()=>{m.get("api/Log/GetSystemLogs").then(t=>{c.value=t})},v=t=>{switch(t){case"Info":return"info";case"Warn":return"warning";case"Error":return"danger";case"Trace":return"success";case"Debug":return"";default:return""}},h=()=>{var a=`系统日志${s.value==null?"":`[${s.value[0]}-${s.value[1]}]`}.xlsx`,p=_.book_new(),i=_.json_to_sheet(c.value);_.book_append_sheet(p,i,"Sheet1"),D(p,a)},w=t=>{t!=null?m.get("api/LogSystem/GetLogs",{params:{startDateTime:t[0],endDateTime:t[1]}}).then(a=>{c.value=a}):d()};return(t,a)=>{const p=n("el-date-picker"),i=n("el-button"),x=n("el-divider"),o=n("el-table-column"),b=n("el-tag"),y=n("el-table");return V(),k(C,null,[e(I,{title:"系统日志",icon:"icon-calendar"}),g("div",Y,[e(p,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=l=>s.value=l),"value-format":"YYYY-MM-DD HH:mm:ss",type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",onChange:w},null,8,["modelValue"]),e(i,{type:"primary",icon:T(B),plain:"",onClick:h},{default:r(()=>[f("导出日志")]),_:1},8,["icon"])]),e(x),e(y,{data:c.value,height:"calc(100vh - 223px)"},{default:r(()=>[e(o,{type:"expand"},{default:r(l=>[g("p",{class:"log-exception",innerHTML:l.row.exception},null,8,E)]),_:1}),e(o,{prop:"logged",label:"日期",width:"200"}),e(o,{prop:"id",label:"ID",width:"80"}),e(o,{prop:"level",label:"日志类型",width:"100"},{default:r(l=>[e(b,{type:v(l.row.level)},{default:r(()=>[f(H(l.row.level),1)]),_:2},1032,["type"])]),_:1}),e(o,{prop:"logger",label:"日志来源","show-overflow-tooltip":""}),e(o,{prop:"message",label:"日志信息","show-overflow-tooltip":""})]),_:1},8,["data"])],64)}}});const j=M(F,[["__scopeId","data-v-3f35607f"]]);export{j as default};
