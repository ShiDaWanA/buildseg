import{B as U}from"./BaseTitle-588acb84.js";import{d as z,r as p,D as M,H as P,l as v,c as a,e as $,h as e,f as F,w as t,F as A,o as G,i,g as m,E as H,a5 as I}from"./index-ab68adb5.js";const J=z({__name:"RegistrationReview",setup(S){const u=p(""),b=p([]),V=M(()=>b.value.filter(o=>!u.value||o.organization.toLowerCase().includes(u.value.toLowerCase())||o.contactPerson.toLowerCase().includes(u.value.toLowerCase()))),C=({row:o})=>o.status==2?"warning-row":o.status==1?"success-row":"";P(()=>{f()});const f=()=>{v.get("api/Registration/GetAll").then(o=>{b.value=o})},h=o=>{v.post("/api/Registration/Delete/"+o.id).then(()=>{f(),H({type:"success",message:"删除成功"})})},d=p(!1),k=p();let r=p({id:"",status:0,comment:""});const x=o=>{d.value=!0,I(()=>{r.value={...o},console.log("🚀 ~ file: RegistrationReview.vue:98 ~ nextTick ~ form.value:",r.value)})},y=()=>{v.post("api/Registration/update",r.value).then(()=>{d.value=!1,f()})};return(o,n)=>{const g=a("el-input"),R=a("el-divider"),s=a("el-table-column"),c=a("el-button"),D=a("el-popconfirm"),T=a("el-table"),_=a("el-radio"),B=a("el-radio-group"),w=a("el-form-item"),E=a("el-form"),L=a("el-dialog");return G(),$(A,null,[e(U,{title:"注册申请",icon:"icon-supplierfeatures"}),F("div",null,[e(g,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=l=>u.value=l),modelModifiers:{trim:!0},style:{width:"300px"},placeholder:"输入关键字搜索",clearable:""},null,8,["modelValue"])]),e(R),e(T,{data:V.value,height:"calc(100vh - 223px)","row-class-name":C},{default:t(()=>[e(s,{type:"index",width:"50"}),e(s,{prop:"organization",label:"机构名称"}),e(s,{prop:"contactPerson",label:"联系人"}),e(s,{prop:"contactPhone",label:"联系电话"}),e(s,{prop:"organizationType",label:"机构类型"}),e(s,{prop:"industryCategory",label:"行业类别"}),e(s,{prop:"remark",label:"备注"}),e(s,{prop:"created",label:"申请日期","show-overflow-tooltip":""}),e(s,{width:"150","class-name":"hover-to-show"},{default:t(l=>[e(c,{type:"primary",link:"",onClick:N=>x(l.row)},{default:t(()=>[i("编辑")]),_:2},1032,["onClick"]),e(D,{width:"170","confirm-button-text":"删除","cancel-button-text":"取消",title:"确认删除此申请么?",onConfirm:N=>h(l.row)},{reference:t(()=>[e(c,{type:"danger",link:""},{default:t(()=>[i("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),e(L,{title:"审核",modelValue:d.value,"onUpdate:modelValue":n[4]||(n[4]=l=>d.value=l),"close-on-click-modal":!1,width:"500px"},{footer:t(()=>[e(c,{onClick:n[3]||(n[3]=l=>d.value=!1)},{default:t(()=>[i("取消")]),_:1}),e(c,{type:"primary",onClick:y},{default:t(()=>[i("提交")]),_:1})]),default:t(()=>[e(E,{model:m(r),ref_key:"formRef",ref:k,"label-position":"top"},{default:t(()=>[e(w,{label:"状态",prop:"status"},{default:t(()=>[e(B,{modelValue:m(r).status,"onUpdate:modelValue":n[1]||(n[1]=l=>m(r).status=l)},{default:t(()=>[e(_,{label:0},{default:t(()=>[i("待处理")]),_:1}),e(_,{label:1},{default:t(()=>[i("已通过")]),_:1}),e(_,{label:2},{default:t(()=>[i("拒绝")]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"备注",prop:"comment"},{default:t(()=>[e(g,{modelValue:m(r).comment,"onUpdate:modelValue":n[2]||(n[2]=l=>m(r).comment=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}}});export{J as default};
