import{_ as L,b as O,d as M,c as V,C as B,e as I,u as D,S as w,a as $,i as E}from"./index.esm.min-90f1887f.js";import{d as N,r as z,H as F,l as U,D as x,c as p,o as c,e as S,h as t,w as a,i as d,t as v,f as j,F as T,q as C,m as g,g as b,_ as G}from"./index-ab68adb5.js";import{B as Y}from"./useSetting-1e631b4e.js";import{i as q}from"./install-7ec1e6c2.js";import{a as H,i as R}from"./install-b3d57d15.js";import{i as J}from"./install-95d77889.js";var K=function(e){L(n,e);function n(){var l=e!==null&&e.apply(this,arguments)||this;return l.type="dataset",l}return n.prototype.init=function(l,o,m){e.prototype.init.call(this,l,o,m),this._sourceManager=new O(this),M(this)},n.prototype.mergeOption=function(l,o){e.prototype.mergeOption.call(this,l,o),M(this)},n.prototype.optionUpdated=function(){this._sourceManager.dirty()},n.prototype.getSourceManager=function(){return this._sourceManager},n.type="dataset",n.defaultOption={seriesLayoutBy:V},n}(B),Q=function(e){L(n,e);function n(){var l=e!==null&&e.apply(this,arguments)||this;return l.type="dataset",l}return n.type="dataset",n}(I);function W(e){e.registerComponentModel(K),e.registerComponentView(Q)}function X(){const e=[{name:"modelType",value:"模型框架"},{name:"batchSize",value:"批处理大小"},{name:"numEpochs",value:"训练轮数"},{name:"lr",value:"学习率"},{name:"optimizer",value:"优化策略"},{name:"lrPolicy",value:"学习率策略"},{name:"worker_num",value:"线程数量"},{name:"nms_score_threshold",value:"分数阈值"},{name:"nms_threshold",value:"交并比阈值"},{name:"num_worker",value:"线程数量"},{name:"samples_per_gpu",value:"每个GPU训练的样本个数"},{name:"max_epochs",value:"训练轮数"},{name:"ValSplit",value:"测试集比例"}];return{formateParam:l=>{if(l==null)return null;let o=JSON.parse(l),m=[];return Object.keys(o).forEach(s=>{let h=e.find(y=>y.name==s),r=h?h.value:s,i="";if(s=="modelType")switch(o[s]){case"unet":i="小模型";break;case"hrnet":i="中模型";break;case"deeplabv3p_xception65":i="大模型";break;default:i="";break}else i=o[s];m.push({name:r,value:i})}),m}}}const Z={class:"info-wrapper"},ee={class:"flex-gap-8"},te=N({__name:"TaskInfo",props:{task:{type:Object,default:function(){return{}}}},setup(e){const n=e;D([$,q,W,H,J,E,R]);const{formateParam:l}=X(),o=z({});F(()=>{U.get(`api/Train/GetMetric/${n.task.id}`).then(r=>{o.value=r})});const m=x(()=>{var r;return{grid:{containLabel:!0,top:8,left:0,right:0,bottom:0},xAxis:{type:"category"},yAxis:{type:"value"},series:[{data:((r=o.value.miou)==null?void 0:r.length)!=0?o.value.miou:o.value.iou,type:"line",showSymbol:!1,lineStyle:{color:"#67C23A",width:1},smooth:!0}]}}),s=x(()=>({grid:{containLabel:!0,top:8,left:0,right:0,bottom:0},xAxis:{type:"category"},yAxis:{type:"value"},series:[{data:o.value.loss,type:"line",showSymbol:!1,lineStyle:{color:"#409EFF",width:1},smooth:!0}]})),h=x(()=>({grid:{containLabel:!0,top:8,left:0,right:0,bottom:8},legend:{left:50,data:["mAP","mAP50","mAP75"]},xAxis:{type:"category"},yAxis:{type:"value"},series:[{name:"mAP",data:o.value.mAP,type:"line",showSymbol:!1,lineStyle:{color:"#009688",width:1},smooth:!0},{name:"mAP50",data:o.value.mAP_50,type:"line",showSymbol:!1,lineStyle:{color:"#03a9f4",width:1},smooth:!0},{name:"mAP75",data:o.value.mAP_75,type:"line",showSymbol:!1,lineStyle:{color:"#673ab7",width:1},smooth:!0}]}));return(r,i)=>{const y=p("el-divider"),f=p("el-descriptions-item"),A=p("el-descriptions"),_=p("el-col"),P=p("el-row"),k=p("el-card");return c(),S("div",Z,[t(P,{gutter:16},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(y,{"content-position":"left"},{default:a(()=>[d("基本信息")]),_:1}),t(A,{column:1,border:""},{default:a(()=>[t(f,{label:"任务编号"},{default:a(()=>[d(v(e.task.id),1)]),_:1}),t(f,{label:"样本库"},{default:a(()=>[d(v(e.task.exampleSet.name),1)]),_:1}),t(f,{label:"标签"},{default:a(()=>[j("div",ee,[(c(!0),S(T,null,C(e.task.tags,u=>(c(),g(Y,{key:u.id,name:u.name,color:u.color},null,8,["name","color"]))),128))])]),_:1}),t(f,{label:"描述"},{default:a(()=>[d(v(e.task.desc),1)]),_:1})]),_:1})]),_:1}),t(_,{span:12},{default:a(()=>[t(y,{"content-position":"left"},{default:a(()=>[d("训练参数")]),_:1}),t(A,{column:1,border:""},{default:a(()=>[(c(!0),S(T,null,C(b(l)(e.task.params),u=>(c(),g(f,{key:u.name,label:u.name},{default:a(()=>[d(v(u.value),1)]),_:2},1032,["label"]))),128))]),_:1})]),_:1})]),_:1}),t(P,{gutter:16,style:{"margin-top":"16px"}},{default:a(()=>[t(_,{span:12},{default:a(()=>[t(k,{header:"LOSS"},{default:a(()=>[t(b(w),{class:"chart",option:s.value,autoresize:""},null,8,["option"])]),_:1})]),_:1}),e.task.type=="seg"||e.task.type=="change"?(c(),g(_,{key:0,span:12},{default:a(()=>[t(k,{header:"准确率"},{default:a(()=>[t(b(w),{class:"chart",option:m.value,autoresize:""},null,8,["option"])]),_:1})]),_:1})):(c(),g(_,{key:1,span:12},{default:a(()=>[t(k,{header:"准确率"},{default:a(()=>[t(b(w),{class:"chart",option:h.value,autoresize:""},null,8,["option"])]),_:1})]),_:1}))]),_:1})])}}});const ie=G(te,[["__scopeId","data-v-20641bbc"]]);export{ie as T};
