import{d as E,r as q,a as j,H as J,l as R,c as i,e as _,h as e,w as l,F as v,o as c,f as u,q as h,t as K,i as U,g as t,m as Q,a6 as z,E as W,p as X,n as Y,_ as Z}from"./index-ab68adb5.js";import{B as ee}from"./BaseTitle-588acb84.js";const V=k=>(X("data-v-8c9c5a47"),k=k(),Y(),k),le={class:"side-nav"},ae=["onClick"],oe={style:{display:"flex","justify-content":"flex-end","margin-top":"24px"}},te=V(()=>u("h3",{id:"h0",class:"sub-title"},"基本设置",-1)),ne={class:"panel image-logo"},re=V(()=>u("h3",{id:"h1",class:"sub-title"},"概览页",-1)),se=V(()=>u("h3",{id:"h2",class:"sub-title"},"登录页",-1)),ue={class:"panel image-logo"},de={class:"panel image-logo"},ie={class:"panel image-logo"},pe=V(()=>u("h3",{id:"h3",class:"sub-title"},"数据存储",-1)),ge=V(()=>u("h3",{id:"h4",class:"sub-title"},"AI后台",-1)),me=["label"],ce={class:"panel",style:{"margin-bottom":"20px"}},_e=V(()=>u("h3",{id:"h5",class:"sub-title"},"Geoserver",-1)),fe=E({__name:"Index",setup(k){const B=[{name:"基础设置",anchor:"#h0"},{name:"概览页",anchor:"#h1"},{name:"登录页",anchor:"#h2"},{name:"数据存储",anchor:"#h3"},{name:"AI后台",anchor:"#h4"},{name:"Geoserver",anchor:"#h5"}],P=q();let o=q({title:"",logo:"",loginLogo:"",loginFooter:[],introduceImage:"",backgroundImage:"",allowRegister:!0,showHelpMenu:!1,showIntroducePage:!1,advancedFeatures:!1,fileStoragePath:"",tileSize:1024,inferGenerateRaster:!1,onlineMap:!1,geoserver:{publicUrl:"",url:"",dataPath:"",authorization:"",workspace:"",baseLayer:""},backendOptions:[]});const G=j({title:[{required:!0,message:"请输入标题",trigger:"blur"}],fileStoragePath:[{required:!0,message:"请输入路径",trigger:"blur"}],"geoserver.publicUrl":[{required:!0,message:"请输入发布地址",trigger:"blur"}],"geoserver.url":[{required:!0,message:"请输入Url地址",trigger:"blur"}],"geoserver.dataPath":[{required:!0,message:"请输入存储路径",trigger:"blur"}],"geoserver.authorization":[{required:!0,message:"请输入密码",trigger:"blur"}],"geoserver.workspace":[{required:!0,message:"请输入工作区",trigger:"blur"}],"geoserver.baseLayer":[{required:!0,message:"请输入底图图层",trigger:"blur"}]});J(()=>{S()});const S=()=>{R.get("/api/setting").then(d=>{o.value=d})},T=()=>{var d;(d=P.value)==null||d.validate(n=>{n&&R.post("api/setting",o.value).then(()=>{S(),W({type:"success",message:"保存成功"})})})},w=(d,n)=>{if(!/\.(png|PNG)$/.test(d.name))return!1;var m=new FileReader;m.onload=f=>{o.value[n]=f.target.result.replace("data:image/png;base64,","")},m.readAsDataURL(d.raw)},x=d=>{document.querySelector(d).scrollIntoView({behavior:"smooth"})},A=d=>{o.value.loginFooter.splice(d,1)},H=()=>{o.value.loginFooter.push("")},N=d=>{o.value.backendOptions.splice(d,1)},O=()=>{o.value.backendOptions.push({url:"",gpuForTrain:[],gpuForTest:[]})};return(d,n)=>{const m=i("el-button"),f=i("el-col"),g=i("el-input"),r=i("el-form-item"),y=i("el-image"),I=i("el-tooltip"),F=i("el-upload"),b=i("el-switch"),$=i("el-input-number"),C=i("el-option"),L=i("el-select"),M=i("el-row"),D=i("el-form");return c(),_(v,null,[e(ee,{title:"系统设置",icon:"icon-settings"}),e(M,{gutter:64},{default:l(()=>[e(f,{span:6},{default:l(()=>[u("div",le,[u("ul",null,[(c(),_(v,null,h(B,(a,p)=>u("li",{class:"nav-item",key:p},[u("a",{onClick:s=>x(a.anchor)},K(a.name),9,ae)])),64))]),u("div",oe,[e(m,{type:"primary",onClick:T},{default:l(()=>[U("保存设置")]),_:1})])])]),_:1}),e(f,{span:18},{default:l(()=>[e(D,{ref_key:"formRef",ref:P,model:t(o),rules:G,"label-position":"top",class:"custom-form"},{default:l(()=>[te,e(r,{label:"主标题",prop:"title"},{default:l(()=>[e(g,{modelValue:t(o).title,"onUpdate:modelValue":n[0]||(n[0]=a=>t(o).title=a),modelModifiers:{trim:!0}},null,8,["modelValue"])]),_:1}),e(r,{label:"主图标",prop:"logo"},{default:l(()=>[u("div",ne,[e(F,{accept:"image/png",action:"","auto-upload":!1,"show-file-list":!1,"on-change":a=>w(a,"logo")},{trigger:l(()=>[e(I,{content:"点击上传图片"},{default:l(()=>[e(y,{src:"data:image/png;base64,"+t(o).logo},null,8,["src"])]),_:1})]),_:1},8,["on-change"])])]),_:1}),e(r,{label:"帮助菜单"},{default:l(()=>[e(b,{modelValue:t(o).showHelpMenu,"onUpdate:modelValue":n[1]||(n[1]=a=>t(o).showHelpMenu=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"介绍页面"},{default:l(()=>[e(b,{modelValue:t(o).showIntroducePage,"onUpdate:modelValue":n[2]||(n[2]=a=>t(o).showIntroducePage=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"高级功能"},{default:l(()=>[e(b,{modelValue:t(o).advancedFeatures,"onUpdate:modelValue":n[3]||(n[3]=a=>t(o).advancedFeatures=a)},null,8,["modelValue"])]),_:1}),re,e(r,{label:"在线地图"},{default:l(()=>[e(b,{modelValue:t(o).onlineMap,"onUpdate:modelValue":n[4]||(n[4]=a=>t(o).onlineMap=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"底图图层",prop:"geoserver.baseLayer"},{default:l(()=>[e(g,{modelValue:t(o).geoserver.baseLayer,"onUpdate:modelValue":n[5]||(n[5]=a=>t(o).geoserver.baseLayer=a),disabled:t(o).onlineMap},null,8,["modelValue","disabled"])]),_:1}),se,e(r,{label:"开放注册"},{default:l(()=>[e(b,{modelValue:t(o).allowRegister,"onUpdate:modelValue":n[6]||(n[6]=a=>t(o).allowRegister=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"登录页背景",prop:"backgroundImage"},{default:l(()=>[u("div",ue,[e(F,{accept:"image/png",action:"","auto-upload":!1,"show-file-list":!1,"on-change":a=>w(a,"backgroundImage")},{trigger:l(()=>[e(I,{content:"点击上传图片"},{default:l(()=>[e(y,{src:"data:image/png;base64,"+t(o).backgroundImage},null,8,["src"])]),_:1})]),_:1},8,["on-change"])])]),_:1}),e(r,{label:"登录页介绍图片",prop:"introduceImage"},{default:l(()=>[u("div",de,[e(F,{accept:"image/png",action:"","auto-upload":!1,"show-file-list":!1,"on-change":a=>w(a,"introduceImage")},{trigger:l(()=>[e(I,{content:"点击上传图片"},{default:l(()=>[e(y,{src:"data:image/png;base64,"+t(o).introduceImage},null,8,["src"])]),_:1})]),_:1},8,["on-change"])])]),_:1}),e(r,{label:"登录页图标",prop:"loginLogo"},{default:l(()=>[u("div",ie,[e(F,{accept:"image/png",action:"","auto-upload":!1,"show-file-list":!1,"on-change":a=>w(a,"loginLogo")},{trigger:l(()=>[e(I,{content:"点击上传图片"},{default:l(()=>[e(y,{src:"data:image/png;base64,"+t(o).loginLogo},null,8,["src"])]),_:1})]),_:1},8,["on-change"])])]),_:1}),e(r,{label:"登录页页脚"}),(c(!0),_(v,null,h(t(o).loginFooter,(a,p)=>(c(),Q(r,{label:"页脚"+(p+1),key:"footer"+p},{default:l(()=>[e(g,{placeholder:"请输入页脚",modelValue:t(o).loginFooter[p],"onUpdate:modelValue":s=>t(o).loginFooter[p]=s},{append:l(()=>[e(m,{onClick:z(s=>A(p),["prevent"])},{default:l(()=>[U("删除")]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]))),128)),e(r,null,{default:l(()=>[e(m,{type:"primary",onClick:H},{default:l(()=>[U("添加页脚")]),_:1})]),_:1}),pe,e(r,{label:"主路径",prop:"fileStoragePath"},{default:l(()=>[e(g,{modelValue:t(o).fileStoragePath,"onUpdate:modelValue":n[7]||(n[7]=a=>t(o).fileStoragePath=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"切片大小"},{default:l(()=>[e($,{modelValue:t(o).tileSize,"onUpdate:modelValue":n[8]||(n[8]=a=>t(o).tileSize=a),min:512,step:2,"step-strictly":""},null,8,["modelValue"])]),_:1}),e(r,{label:"解译时生成栅格成果"},{default:l(()=>[e(b,{modelValue:t(o).inferGenerateRaster,"onUpdate:modelValue":n[9]||(n[9]=a=>t(o).inferGenerateRaster=a)},null,8,["modelValue"])]),_:1}),ge,(c(!0),_(v,null,h(t(o).backendOptions,(a,p)=>(c(),_("div",{label:"后台"+(p+1),key:"ai"+p},[e(r,{label:"后台"+(p+1)},{default:l(()=>[e(g,{placeholder:"请输入Url地址",modelValue:a.url,"onUpdate:modelValue":s=>a.url=s},{append:l(()=>[e(m,{onClick:z(s=>N(p),["prevent"])},{default:l(()=>[U("删除")]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["label"]),u("div",ce,[e(M,{gutter:24},{default:l(()=>[e(f,{span:12},{default:l(()=>[e(r,{label:"训练GPU设定"},{default:l(()=>[e(L,{modelValue:a.gpuForTrain,"onUpdate:modelValue":s=>a.gpuForTrain=s,multiple:"",placeholder:"请选择"},{default:l(()=>[(c(),_(v,null,h(16,s=>e(C,{key:s,label:s-1,value:s-1},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),e(f,{span:12},{default:l(()=>[e(r,{label:"解译GPU设定"},{default:l(()=>[e(L,{modelValue:a.gpuForTest,"onUpdate:modelValue":s=>a.gpuForTest=s,multiple:"",placeholder:"请选择"},{default:l(()=>[(c(),_(v,null,h(16,s=>e(C,{key:s,label:s-1,value:s-1},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024)])],8,me))),128)),e(r,null,{default:l(()=>[e(m,{type:"primary",onClick:O},{default:l(()=>[U("添加后台")]),_:1})]),_:1}),_e,e(r,{label:"发布地址",prop:"geoserver.publicUrl"},{default:l(()=>[e(g,{modelValue:t(o).geoserver.publicUrl,"onUpdate:modelValue":n[10]||(n[10]=a=>t(o).geoserver.publicUrl=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"Url地址",prop:"geoserver.url"},{default:l(()=>[e(g,{modelValue:t(o).geoserver.url,"onUpdate:modelValue":n[11]||(n[11]=a=>t(o).geoserver.url=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"存储路径",prop:"geoserver.dataPath"},{default:l(()=>[e(g,{modelValue:t(o).geoserver.dataPath,"onUpdate:modelValue":n[12]||(n[12]=a=>t(o).geoserver.dataPath=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"密码",prop:"geoserver.authorization"},{default:l(()=>[e(g,{modelValue:t(o).geoserver.authorization,"onUpdate:modelValue":n[13]||(n[13]=a=>t(o).geoserver.authorization=a)},null,8,["modelValue"])]),_:1}),e(r,{label:"工作区",prop:"geoserver.workspace"},{default:l(()=>[e(g,{modelValue:t(o).geoserver.workspace,"onUpdate:modelValue":n[14]||(n[14]=a=>t(o).geoserver.workspace=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1})]),_:1})],64)}}});const Ve=Z(fe,[["__scopeId","data-v-8c9c5a47"]]);export{Ve as default};
