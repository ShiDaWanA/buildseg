import{M as k}from"./MapView-15f162c8.js";import{d as y,r as C,l as x,D as c,o as u,e as p,F as w,q as G,f as v,G as L,s as A,t as I,_ as S,c as i,h as a,w as o,i as D,g as f,a as F,H as $,I as B}from"./index-ab68adb5.js";import{u as z,S as h,i as O,a as T}from"./index.esm.min-90f1887f.js";import{i as M}from"./install-def00ef4.js";import{i as U,a as E}from"./install-b3d57d15.js";import{f as P}from"./format-aee67674.js";import{i as V}from"./install-7ec1e6c2.js";import{H}from"./HubConnectionBuilder-04baf802.js";/* empty css           */import"./ImageInfo.vue_vue_type_script_setup_true_lang-abee9b6f.js";const N={class:"data-list-wrapper"},q={class:"value"},R={class:"title"},j=y({__name:"OverviewData",setup(b){const e=C({totalDataset:0,totalImage:0,totalModel:0,totalExampleSet:0});x({method:"get",url:"api/Overview/GetDataInfo"}).then(l=>{e.value=l});const s=c(()=>({totalDataset:{icon:"icon-fuhaoku",color:"#e6a23c",title:"数据集",value:e.value.totalDataset},totalImage:{icon:"icon-yaogancehui",color:"#67c23a",title:"影像",value:e.value.totalImage},totalExampleSet:{icon:"icon-wapianguanli",color:"#409eff",title:"样本库",value:e.value.totalExampleSet},totalModel:{icon:"icon-box",color:"#f56c6c",title:"模型",value:e.value.totalModel}}));return(l,d)=>(u(),p("div",N,[(u(!0),p(w,null,G(s.value,(n,_)=>(u(),p("div",{class:"data-card",key:_},[v("i",{class:L(["iconfont",n.icon]),style:A({color:n.color})},null,6),v("div",null,[v("span",q,I(n.value),1),v("span",R,I(n.title),1)])]))),128))]))}});const J=S(j,[["__scopeId","data-v-a2cc5c40"]]),K=y({__name:"OverviewTask",setup(b){z([O,M,T,U]);const e=C({totalTrain:0,totalValidation:0,totalSegmentation:0,totalChange:0,totalTarget:0,totalInstance:0});x({method:"get",url:"api/Overview/GetTaskInfo"}).then(l=>{e.value=l});const s=c(()=>({tooltip:{appendToBody:!0,trigger:"item"},series:[{type:"pie",radius:["25%","35%"],center:["50%","25%"],data:[{value:e.value.totalTrain,name:"训练任务"},{value:e.value.totalValidation,name:"测试任务"}],label:{position:"outer",alignTo:"labelLine",bleedMargin:0}},{type:"pie",radius:["25%","35%"],center:["50%","75%"],data:[{value:e.value.totalSegmentation,name:"地物分割"},{value:e.value.totalChange,name:"变化检测"},{value:e.value.totalTarget,name:"目标识别"},{value:e.value.totalInstance,name:"实例分割"}],label:{position:"outer",alignTo:"labelLine",bleedMargin:0}}]}));return(l,d)=>{const n=i("el-divider"),_=i("el-card");return u(),p(w,null,[a(n,{"content-position":"left"},{default:o(()=>[D("任务状况")]),_:1}),a(_,{shadow:"never"},{default:o(()=>[a(f(h),{class:"chart",option:s.value,autoresize:""},null,8,["option"])]),_:1})],64)}}});const Q=S(K,[["__scopeId","data-v-dc1aa0b1"]]),W={class:"panel-wrapper"},X=y({__name:"OverviewSystem",setup(b){z([O,M,E,T,U,V]);const e=F({memoryData:[],cpuData:[],gpuSeries:[],gpuLegendData:[],driveUsedSize:0,driveFreeSize:0});let s;$(()=>{x({method:"get",url:"api/Overview/GetDriveInfo"}).then(t=>{e.driveUsedSize=t.totalUsedSize,e.driveFreeSize=t.totalFreeSize}),s=new H().withAutomaticReconnect().withUrl(B+"/SystemHub").build(),s.start().catch(t=>{console.log("🚀 ~ file: OverviewSystem.vue:60 ~ onMounted ~ err:",t)}),s.on("GetMenCpuInfo",(t,g,m)=>{e.memoryData.length>100&&e.memoryData.shift(),e.memoryData.push([m,t]),e.cpuData.length>100&&e.cpuData.shift(),e.cpuData.push([m,g])}),s.on("GetGpuInfo",(t,g,m,r)=>{e.gpuSeries[t]||(e.gpuSeries[t]={name:"GPU"+t,type:"line",showSymbol:!1,emphasis:{focus:"series"},lineStyle:{width:1},animation:!1,data:[]}),e.gpuLegendData[t]||(e.gpuLegendData[t]="GPU"+t),e.gpuSeries[t].data.length>100&&e.gpuSeries[t].data.shift(),e.gpuSeries[t].data.push([r,g])})});const l=c(()=>({tooltip:{appendToBody:!0,trigger:"item",formatter:t=>t.marker+t.name+" "+P(t.data.value*1024)},series:[{type:"pie",radius:"60%",data:[{value:e.driveUsedSize,name:"已用空间"},{value:e.driveFreeSize,name:"可用空间"}]}]})),d=c(()=>({grid:{top:10,left:0,right:0,bottom:-10,containLabel:!0},xAxis:{type:"time",show:!1},yAxis:{type:"value",max:1,min:0},series:[{type:"line",showSymbol:!1,animation:!1,lineStyle:{color:"#F56C6C",width:1},areaStyle:{color:"#F56C6C",opacity:.1},data:e.cpuData}]})),n=c(()=>({grid:{top:10,left:0,right:0,bottom:-10,containLabel:!0},xAxis:{type:"time",show:!1},yAxis:{type:"value",max:1,min:0},series:[{type:"line",showSymbol:!1,animation:!1,lineStyle:{color:"#E6A23C",width:1},areaStyle:{color:"#E6A23C",opacity:.1},data:e.memoryData}]})),_=c(()=>({legend:{data:e.gpuLegendData},grid:{top:30,left:0,right:0,bottom:-10,containLabel:!0},xAxis:{type:"time",show:!1},yAxis:{type:"value",max:1,min:0},series:e.gpuSeries}));return(t,g)=>{const m=i("el-divider"),r=i("el-card");return u(),p(w,null,[a(m,{"content-position":"left"},{default:o(()=>[D("服务器状态")]),_:1}),v("div",W,[a(r,{header:"硬盘空间",shadow:"never",class:"card-flex"},{default:o(()=>[a(f(h),{class:"chart",option:l.value,autoresize:""},null,8,["option"])]),_:1}),a(r,{header:"内存利用率",shadow:"never",class:"card-flex"},{default:o(()=>[a(f(h),{class:"chart",option:n.value,autoresize:""},null,8,["option"])]),_:1}),a(r,{header:"CPU利用率",shadow:"never",class:"card-flex"},{default:o(()=>[a(f(h),{class:"chart",option:d.value,autoresize:""},null,8,["option"])]),_:1}),a(r,{header:"GPU利用率",shadow:"never",class:"card-flex"},{default:o(()=>[a(f(h),{class:"chart",option:_.value,autoresize:""},null,8,["option"])]),_:1})])],64)}}});const Y=S(X,[["__scopeId","data-v-472bbc77"]]),Z=y({__name:"Index",setup(b){return(e,s)=>{const l=i("el-col"),d=i("el-divider"),n=i("el-row");return u(),p(w,null,[a(J),a(n,{gutter:16},{default:o(()=>[a(l,{span:6},{default:o(()=>[a(Q)]),_:1}),a(l,{span:18},{default:o(()=>[a(d,{"content-position":"left"},{default:o(()=>[D("数据概览")]),_:1}),a(k,{class:"map"})]),_:1})]),_:1}),a(Y)],64)}}});const ue=S(Z,[["__scopeId","data-v-b306f76a"]]);export{ue as default};
